@using Bump.Components
@model Bump.VM.ThemeVm
@inject IViewLocalizer Localizer
@{
    Layout = "_Layout";
}

<script>

    function uploadFile() {
      document.getElementById('theme_form').submit()
    }

</script>

<form
    id="theme_form"
    asp-controller="Theme"
    asp-action="@Model.Method"
    enctype="multipart/form-data"
    method="post">
    <div class="form-group">
        <label asp-for="Title "></label>
        <input asp-for="Title " class="form-control">
        <span asp-validation-for="Title " class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Content "></label>
        <input asp-for="Content " class="form-control">
        <span asp-validation-for="Content " class="text-danger"></span>
    </div>
    <input type="hidden" asp-for="Id ">
    <input type="hidden" asp-for="Subcategory.Id ">
    <input type="hidden" asp-for="Method ">
    <div style="margin-top: 10px; margin-left: 5px" class="row form-group">
        @foreach( var media in Model.Media ) {
            <div style="position: relative">
                <input type="hidden" name="Media" value="@media">
                <div class="image-column">
                    <div style="height: 100%; width: auto; border: 1px #ccc;">
                        @await Component.InvokeAsync( typeof( Media ) , new {id = media} )
                    </div>
                </div>
                <button
                    style="width: 20px;height: 20px;padding: 0;line-height: 10px;right: 0;top: 0;position: absolute;"
                    type="submit"
                    class="btn btn-danger"
                    name="deleteMedia"
                    value="@media">
                    x
                </button>
            </div>
        }
        @if( Model.Media.Count < 10 ) {
            <div class="col-md-1">
                <div class="centered_cont">
                    <div class="upload-button">
                        <div class="label">+</div>
                        <input name="UploadingMedia" type="file" size="1" onchange="uploadFile();"/>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-outline-primary">@Strings[ "Submit" ]</button>
    </div>
</form>